schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data_universal.py
    deps:
    - path: src/fetch_data_universal.py
      hash: md5
      md5: 839dbe3734760ee90b1830e17b54b2fd
      size: 5451
    outs:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: 6592a49ae2373bb8310d6f73f5c446c8
      size: 3143874
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: ec4da86868d9d75c2f0dc75482a855da
      size: 205057
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: 6592a49ae2373bb8310d6f73f5c446c8
      size: 3143874
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: ec4da86868d9d75c2f0dc75482a855da
      size: 205057
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: src/train.py
      hash: md5
      md5: 5fd1ca86841de0ba6546543efccd842b
      size: 3497
    outs:
    - path: app/models/away_model.json
      hash: md5
      md5: eabc6043bfd9be382d7c388ea2c68cd0
      size: 335326
    - path: app/models/home_model.json
      hash: md5
      md5: 98e5d508a7384ca0df4ac789c8d4dee2
      size: 335151
  predict:
    cmd: python src/predict.py
    deps:
    - path: app/models/away_model.json
      hash: md5
      md5: eabc6043bfd9be382d7c388ea2c68cd0
      size: 335326
    - path: app/models/home_model.json
      hash: md5
      md5: 98e5d508a7384ca0df4ac789c8d4dee2
      size: 335151
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: src/predict.py
      hash: md5
      md5: 20fb092271fccd9f35803181b32d1063
      size: 3116
    outs:
    - path: data/predictions/predicted_matches.csv
      hash: md5
      md5: 52213ab5a740b89a02bf23a773795990
      size: 12939138
  preprocess_model1:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  preprocess_model2:
    cmd: python src/preprocess_model2.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: c5a92f836512ee1becc6fcffd4abc17f
      size: 1377224
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: a4cd597273be3d2ff022cd51bff1a74d
      size: 837591
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
    - path: src/preprocess_model2.py
      hash: md5
      md5: 6565c74d5ef99803a69d7ebbcb24b0d3
      size: 6147
    outs:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: 64b73e52c2f12e1e2281c0666b383075
      size: 1347844
  train_model2:
    cmd: python src/train_model2.py
    deps:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: 64b73e52c2f12e1e2281c0666b383075
      size: 1347844
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 394117b69fe11c686616d9dc67528999
      size: 2262500
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: 73e92b036e5c49ce086ddff230904e70
      size: 54117
    - path: src/train_model2.py
      hash: md5
      md5: 4c64c6ee63bf6c23281b9e7bb46ed479
      size: 4885
    outs:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: fae1c5b2aa203c8d9427ff4eb653a048
      size: 369496925
    - path: models/model2_xgb.json
      hash: md5
      md5: 75a71fd06a244aab9acdd38d99937ecb
      size: 7091676
  predict_model2:
    cmd: python src/predict_model2.py
    deps:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: fae1c5b2aa203c8d9427ff4eb653a048
      size: 369496925
    - path: models/model2_xgb.json
      hash: md5
      md5: 75a71fd06a244aab9acdd38d99937ecb
      size: 7091676
    - path: src/predict_model2.py
      hash: md5
      md5: 40602c05fbd7504841b06ff78ca67272
      size: 4211
    outs:
    - path: data/predictions/model2_predictions.csv
      hash: md5
      md5: 3a4879bb8c06555ceac101e597654484
      size: 134
  predict_model3_players:
    cmd: python src/predict_model2_players.py
    deps:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 4f3914328466a8b3bab67288d4d04910
      size: 410531
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 394117b69fe11c686616d9dc67528999
      size: 2262500
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: 73e92b036e5c49ce086ddff230904e70
      size: 54117
    - path: models/model2_xgb.json
      hash: md5
      md5: 75a71fd06a244aab9acdd38d99937ecb
      size: 7091676
    - path: src/predict_model2_players.py
      hash: md5
      md5: 91eb21b60ebf57ae2a31c8ae4cb811c2
      size: 5634
    outs:
    - path: data/predictions/model3_players_output.csv
      hash: md5
      md5: c835497e2a3cf1506514c231e8f570de
      size: 225
  data_drift:
    cmd: python src/monitor_drift.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 4f3914328466a8b3bab67288d4d04910
      size: 410531
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 394117b69fe11c686616d9dc67528999
      size: 2262500
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: 73e92b036e5c49ce086ddff230904e70
      size: 54117
    - path: src/monitor_drift.py
      hash: md5
      md5: 33540fbcba9d01d0912cf02758347150
      size: 5346
    outs:
    - path: reports/
      hash: md5
      md5: 5540c1f7afce34578fed6928109e5117.dir
      size: 7459
      nfiles: 9
  extract_matches_model2:
    cmd: python -m src.data_extraction.extract_matches
    deps:
    - path: src/data_extraction/extract_matches.py
      hash: md5
      md5: b6fb9d092b924e05a1be1b6e9650689c
      size: 500
    outs:
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: a4cd597273be3d2ff022cd51bff1a74d
      size: 837591
  extract_player_stats_model2:
    cmd: python -m src.data_extraction.extract_player_stats
    deps:
    - path: src/data_extraction/extract_player_stats.py
      hash: md5
      md5: 906faa8a10ace9a30758bb44b7c40d64
      size: 909
    outs:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: c5a92f836512ee1becc6fcffd4abc17f
      size: 1377224
  extract_team_stats_model2:
    cmd: python -m src.data_extraction.extract_team_stats
    deps:
    - path: src/data_extraction/extract_team_stats.py
      hash: md5
      md5: f572f1b0477a890dd7cdb40b527e39aa
      size: 610
    outs:
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 394117b69fe11c686616d9dc67528999
      size: 2262500
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: 73e92b036e5c49ce086ddff230904e70
      size: 54117
  build_player_strengths:
    cmd: python src/build_player_strengths.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: c5a92f836512ee1becc6fcffd4abc17f
      size: 1377224
    - path: src/build_player_strengths.py
      hash: md5
      md5: 82f4fb3fe2f1288acae2d626d27b1706
      size: 1424
    outs:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 4f3914328466a8b3bab67288d4d04910
      size: 410531
  build_team_name_mapping:
    cmd: python src/build_team_name_mapping.py
    deps:
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: a4cd597273be3d2ff022cd51bff1a74d
      size: 837591
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: 73e92b036e5c49ce086ddff230904e70
      size: 54117
    - path: src/build_team_name_mapping.py
      hash: md5
      md5: 2988171f3d3546f7e7bcba74eec1d103
      size: 4875
    outs:
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
