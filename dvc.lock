schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data_universal.py
    deps:
    - path: src/fetch_data_universal.py
      hash: md5
      md5: 839dbe3734760ee90b1830e17b54b2fd
      size: 5451
    outs:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: 6592a49ae2373bb8310d6f73f5c446c8
      size: 3143874
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: ec4da86868d9d75c2f0dc75482a855da
      size: 205057
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: 6592a49ae2373bb8310d6f73f5c446c8
      size: 3143874
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: ec4da86868d9d75c2f0dc75482a855da
      size: 205057
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: src/train.py
      hash: md5
      md5: e9148ef39568d957ba0b2fa56388ca42
      size: 5389
    outs:
    - path: app/models/away_model.json
      hash: md5
      md5: eabc6043bfd9be382d7c388ea2c68cd0
      size: 335326
    - path: app/models/home_model.json
      hash: md5
      md5: 98e5d508a7384ca0df4ac789c8d4dee2
      size: 335151
    - path: reports/model1_metrics.json
      hash: md5
      md5: cf869f74a8e745701b8c8fdcb3e60efb
      size: 282
  predict:
    cmd: python src/predict.py
    deps:
    - path: app/models/away_model.json
      hash: md5
      md5: eabc6043bfd9be382d7c388ea2c68cd0
      size: 335326
    - path: app/models/home_model.json
      hash: md5
      md5: 98e5d508a7384ca0df4ac789c8d4dee2
      size: 335151
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: src/predict.py
      hash: md5
      md5: 20fb092271fccd9f35803181b32d1063
      size: 3116
    outs:
    - path: data/predictions/predicted_matches.csv
      hash: md5
      md5: 52213ab5a740b89a02bf23a773795990
      size: 12939138
  preprocess_model1:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  preprocess_model2:
    cmd: python src/preprocess_model2.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: 9b92dad7325dff2716ac1be44e36a175
      size: 842040
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
    - path: src/preprocess_model2.py
      hash: md5
      md5: 6565c74d5ef99803a69d7ebbcb24b0d3
      size: 6147
    outs:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: ccb77e1fe66450e0c5ba7fded948fa17
      size: 1354234
  train_model2:
    cmd: python src/train_model2.py
    deps:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: ccb77e1fe66450e0c5ba7fded948fa17
      size: 1354234
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 018487c4a9bb57ee2defe8440b90ffc6
      size: 2268479
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: src/train_model2.py
      hash: md5
      md5: 257882107b28f15c4edf59fcb1ab5889
      size: 6753
    outs:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 4051857bb44b6825a765b1059e634f39
      size: 371368938
    - path: models/model2_xgb.json
      hash: md5
      md5: dd75ed7c16783b1422518fa9a54f6d9b
      size: 7163601
    - path: reports/model2_metrics.json
      hash: md5
      md5: 42edce3c09b665af3cdc63fc867d971e
      size: 282
  predict_model2:
    cmd: python src/predict_model2.py
    deps:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 4051857bb44b6825a765b1059e634f39
      size: 371368938
    - path: models/model2_xgb.json
      hash: md5
      md5: dd75ed7c16783b1422518fa9a54f6d9b
      size: 7163601
    - path: src/predict_model2.py
      hash: md5
      md5: b1f2cf85cb4bae096e6e9f93b90aa7e2
      size: 6171
    outs:
    - path: data/predictions/model2_predictions.csv
      hash: md5
      md5: 70d26e482922dfec3a85fe1fe146d48d
      size: 134
  predict_model3_players:
    cmd: python src/predict_model2_players.py
    deps:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 018487c4a9bb57ee2defe8440b90ffc6
      size: 2268479
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: models/model2_xgb.json
      hash: md5
      md5: dd75ed7c16783b1422518fa9a54f6d9b
      size: 7163601
    - path: src/predict_model2_players.py
      hash: md5
      md5: fbf3e7ed1cd2f2993f922a4df3bfb91c
      size: 8070
    outs:
    - path: data/predictions/model3_players_output.csv
      hash: md5
      md5: 9f0668f61fe6359266ed47e5d72e0dd7
      size: 221
  data_drift:
    cmd: python src/monitor_drift.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 0bbb636630a6f16d324d747ec5a5a8c1
      size: 11353191
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 018487c4a9bb57ee2defe8440b90ffc6
      size: 2268479
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: src/monitor_drift.py
      hash: md5
      md5: 33540fbcba9d01d0912cf02758347150
      size: 5346
    outs:
    - path: reports/drift_summary.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
  extract_matches_model2:
    cmd: python -m src.data_extraction.extract_matches
    deps:
    - path: src/data_extraction/extract_matches.py
      hash: md5
      md5: b6fb9d092b924e05a1be1b6e9650689c
      size: 500
    outs:
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: 9e01a45c32c322b4b5fca17f89aa1ef5
      size: 842060
  extract_player_stats_model2:
    cmd: python -m src.data_extraction.extract_player_stats
    deps:
    - path: src/data_extraction/extract_player_stats.py
      hash: md5
      md5: 906faa8a10ace9a30758bb44b7c40d64
      size: 909
    outs:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: c5a92f836512ee1becc6fcffd4abc17f
      size: 1377224
  extract_team_stats_model2:
    cmd: python -m src.data_extraction.extract_team_stats
    deps:
    - path: src/data_extraction/extract_team_stats.py
      hash: md5
      md5: f572f1b0477a890dd7cdb40b527e39aa
      size: 610
    outs:
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 018487c4a9bb57ee2defe8440b90ffc6
      size: 2268479
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
  build_player_strengths:
    cmd: python src/build_player_strengths.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
    - path: src/build_player_strengths.py
      hash: md5
      md5: 82f4fb3fe2f1288acae2d626d27b1706
      size: 1424
    outs:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
  build_team_name_mapping:
    cmd: python src/build_team_name_mapping.py
    deps:
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: 9b92dad7325dff2716ac1be44e36a175
      size: 842040
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: src/build_team_name_mapping.py
      hash: md5
      md5: 2988171f3d3546f7e7bcba74eec1d103
      size: 4875
    outs:
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
  eval_model3_player_mode:
    cmd: python src/eval_model3_player_mode.py
    deps:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 4051857bb44b6825a765b1059e634f39
      size: 371368938
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: models/model2_xgb.json
      hash: md5
      md5: dd75ed7c16783b1422518fa9a54f6d9b
      size: 7163601
    - path: src/eval_model3_player_mode.py
      hash: md5
      md5: aa2ab2ba365cb813c7650e19350f44a3
      size: 8983
    outs:
    - path: reports/model3_player_mode_metrics.json
      hash: md5
      md5: c3fb62efdefe44aa0e33cc5cf359f9cb
      size: 280
  select_champion:
    cmd: python src/select_champion.py
    deps:
    - path: reports/model1_metrics.json
      hash: md5
      md5: cf869f74a8e745701b8c8fdcb3e60efb
      size: 282
    - path: reports/model2_metrics.json
      hash: md5
      md5: 42edce3c09b665af3cdc63fc867d971e
      size: 282
    - path: reports/model3_player_mode_metrics.json
      hash: md5
      md5: c3fb62efdefe44aa0e33cc5cf359f9cb
      size: 280
    - path: src/select_champion.py
      hash: md5
      md5: 2fab40a1774b63fad63bc3891f65ed30
      size: 1913
    outs:
    - path: app/champion_config.json
      hash: md5
      md5: 34062cba68afe3cd88969124f1fc7649
      size: 453
